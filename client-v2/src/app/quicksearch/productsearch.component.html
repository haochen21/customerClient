<div class="productsearch-container container">
  <div class="card text-center query-panel" *ngIf="merchant.name">
    <div class="card-header">
      {{merchant.name}}
    </div>
    <div class="card-block">
      <form [formGroup]="form">
        <div class="form-group row">
          <label class="col-sm-2 form-control-label">备注/桌号/特殊需求</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" formControlName="remark">
            <control-messages [control]="form.controls.remark"></control-messages>
          </div>
        </div>
        <div class="form-group row">
          <label class="col-sm-2 form-control-label">捜索（商品名称/编号）</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" formControlName="code" (ngModelChange)="valuechange($event)">
            <control-messages [control]="form.controls.code"></control-messages>
            <div class="info" *ngIf="form.controls.code.pristine">长度1-10个字符</div>
          </div>
        </div>
      </form>
    </div>
  </div>
  <div class="show-panel">
    <div *ngFor="let p of products" class="list-group">
      <a class="list-group-item">
        <div class="media-box">
          <div class="pull-left">
            <img *ngIf="p.imageSource" [src]="imagePreUrl+p.imageSource+'-sm'" style="width:50px; height:50px;">
            <img *ngIf="!p.imageSource" src="../../assets/images/orderpic_03.png" style="width:50px; height:50px;">
          </div>
          <div class="pull-right">
            <button md-mini-fab color="warn" [disabled]="p.status === 1 ||(!p.infinite && p.unitsInStock === 0)" (click)="addCart($event,p)">
              <md-icon fontSet="fa" fontIcon="fa-plus"></md-icon>
            </button>
          </div>
          <div class="media-box-body clearfix">
            <div class="body-container">
              <p class="m0">{{p.name}}</p>
              <p class="m0 text-muted">
                <small>单价：</small>
                <small class="green">￥{{getProductDiscount(p) | numberFormatPipe}}</small>
              </p>
            </div>
          </div>
        </div>
      </a>
    </div>
  </div>
  <ng2-toasty position="top-right"></ng2-toasty>
  <ng2-slim-loading-bar></ng2-slim-loading-bar>
</div>
<ticket-navbar></ticket-navbar>